<!DOCTYPE html>
<html>
<head>
<title>College Event Platform</title>

<style>
*{margin:0;padding:0;font-family:Arial}
body{
height:100vh;
background:url("https://images.unsplash.com/photo-1523050854058-8df90110c9f1") no-repeat center/cover;
display:flex;
justify-content:center;
align-items:center;
}

.blur{
position:fixed;inset:0;
backdrop-filter:blur(12px);
display:none;
}

.card{
width:420px;
max-height:90vh;
overflow:auto;
background:rgba(255,255,255,0.15);
backdrop-filter:blur(10px);
border-radius:15px;
padding:20px;
color:white;
box-shadow:0 0 20px rgba(0,0,0,0.5);
}

input,select,button{
width:100%;
padding:10px;margin:6px 0;
border:none;border-radius:6px;
}

button{
background:#00bcd4;color:white;
cursor:pointer;font-weight:bold;
}

.section{
margin-top:12px;
background:rgba(0,0,0,0.4);
padding:10px;border-radius:8px;
}

.hidden{display:none}
hr{margin:8px 0}
</style>
</head>

<body>

<div class="blur" id="blur"></div>

<!-- LOGIN -->
<div class="card" id="loginCard">

<h2>College Login</h2>

<input id="username" placeholder="Name">

<select id="role">
<option value="student">Student</option>
<option value="admin">Admin</option>
<option value="organizer">Organizer</option>
</select>

<button onclick="login()">Login / Register</button>

</div>

<!-- DASHBOARD -->
<div class="card hidden" id="dashboard">

<h2 id="welcome"></h2>

<!-- EVENTS -->
<div class="section">
<h3>Events</h3>
<div id="eventList"></div>
</div>

<!-- ADMIN PANEL -->
<div class="section hidden" id="adminPanel">
<h3>Admin ‚Äî Add Event</h3>

<input id="eventTitle" placeholder="Event name">
<input id="eventTime" placeholder="Time">
<input id="eventPlace" placeholder="Place">

<button onclick="addEvent()">Add Event</button>
</div>

<!-- APPROVAL PANEL -->
<div class="section hidden" id="approvalPanel">
<h3>Organizer ‚Äî Approvals</h3>
<div id="approvalList"></div>
</div>

<!-- ATTENDANCE PANEL -->
<div class="section hidden" id="attendancePanel">
<h3>Organizer ‚Äî Attendance</h3>
<div id="attendanceList"></div>
</div>

<button onclick="logout()">Logout</button>

</div>

<script>

/* storage */
let users=JSON.parse(localStorage.getItem("users")||"[]");
let events=JSON.parse(localStorage.getItem("events")||"[]");
let registrations=JSON.parse(localStorage.getItem("registrations")||"[]");

let currentUser=null;

/* LOGIN */
function login(){

let name=username.value;
let role=roleSelect.value;

if(!name){alert("Enter name");return;}

let user=users.find(u=>u.name===name);

if(!user){
user={name,role};
users.push(user);
localStorage.setItem("users",JSON.stringify(users));
}

currentUser=user;

loginCard.classList.add("hidden");
dashboard.classList.remove("hidden");
blur.style.display="block";

welcome.innerText="Welcome "+user.name+" ("+user.role+")";

/* role panels */
if(user.role==="admin") adminPanel.classList.remove("hidden");

if(user.role==="organizer"){
approvalPanel.classList.remove("hidden");
attendancePanel.classList.remove("hidden");
}

renderEvents();
renderApprovals();
renderAttendance();
}

/* LOGOUT */
function logout(){location.reload();}

/* ADD EVENT */
function addEvent(){

let e={
title:eventTitle.value,
time:eventTime.value,
place:eventPlace.value
};

if(!e.title)return;

events.push(e);
localStorage.setItem("events",JSON.stringify(events));

eventTitle.value="";
eventTime.value="";
eventPlace.value="";

renderEvents();
}

/* EVENTS */
function renderEvents(){

eventList.innerHTML="";

events.forEach((e,i)=>{

let div=document.createElement("div");

div.innerHTML=`
<b>${e.title}</b><br>
üïí ${e.time}<br>
üìç ${e.place}<br>
${currentUser.role==="student"
?`<button onclick="register(${i})">Register</button>`
:""}
<hr>`;

eventList.appendChild(div);
});
}

/* REGISTER */
function register(eventIndex){

registrations.push({
user:currentUser.name,
event:eventIndex,
status:"pending",
attendance:false
});

localStorage.setItem("registrations",JSON.stringify(registrations));

alert("Request sent for approval!");

renderApprovals();
}

/* APPROVAL PANEL */
function renderApprovals(){

approvalList.innerHTML="";

registrations.forEach((r,i)=>{

if(r.status==="pending"){

let e=events[r.event];

approvalList.innerHTML+=`
${r.user} ‚Üí ${e.title}<br>
<button onclick="approve(${i})">Approve</button>
<button onclick="reject(${i})">Reject</button>
<hr>`;
}
});
}

function approve(i){
registrations[i].status="approved";
saveRegs();
}

function reject(i){
registrations[i].status="rejected";
saveRegs();
}

function saveRegs(){
localStorage.setItem("registrations",JSON.stringify(registrations));
renderApprovals();
renderAttendance();
}

/* ATTENDANCE */
function renderAttendance(){

attendanceList.innerHTML="";

registrations.forEach((r,i)=>{

if(r.status==="approved"){

let e=events[r.event];

attendanceList.innerHTML+=`
${r.user} ‚Üí ${e.title}<br>
Attendance: ${r.attendance?"‚úÖ Present":"‚ùå Not marked"}<br>
<button onclick="markAttendance(${i})">Mark Present</button>
<hr>`;
}
});
}

function markAttendance(i){
registrations[i].attendance=true;
saveRegs();
}

/* shortcuts */
const username=document.getElementById("username");
const roleSelect=document.getElementById("role");

</script>

</body>
</html>
